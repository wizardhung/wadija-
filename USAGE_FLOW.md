# 台語 AI 語音對話系統 - 使用流程圖

## 📱 系統介面預覽

```
┌─────────────────────────────────────────────────────────┐
│         🎙️ 台語 AI 語音對話系統                         │
│    語音輸入 → AI 智能回應 → 台語語音輸出                │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 🟢 系統正常運行中                          🔄 重新檢查  │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 💬 對話內容                          [清除對話]         │
├─────────────────────────────────────────────────────────┤
│                                                          │
│                                      ┌─────────────────┐│
│                                      │  👤 您  14:25   ││
│                                      │  你好，今天天氣  ││
│                                      │  真好            ││
│                                      └─────────────────┘│
│                                                          │
│  ┌─────────────────┐                                    │
│  │  🤖 AI 助手 14:25│                                   │
│  │  是啊！今天是個   │                                   │
│  │  好天氣 🔊       │                                   │
│  └─────────────────┘                                    │
│                                                          │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│                                                          │
│                        ┌───┐                            │
│                        │ 🎤│                            │
│                        └───┘                            │
│                      準備就緒                            │
│                       00:00                             │
│                                                          │
│  📖 使用說明                                            │
│  • 點擊麥克風按鈕開始錄音                                │
│  • 說完話後再次點擊結束錄音                              │
│  • 點擊 AI 回應旁的喇叭圖示可播放語音                    │
│  • 支援台語、華語和英語混合輸入                          │
└─────────────────────────────────────────────────────────┘
```

## 🔄 完整對話流程

```
1️⃣ 用戶操作
   │
   ▼
┌─────────────┐
│  點擊麥克風  │
│  開始錄音   │
└─────────────┘
   │
   ▼
┌─────────────┐
│  說出內容   │
│ (台語/華語) │
└─────────────┘
   │
   ▼
┌─────────────┐
│  再次點擊   │
│  停止錄音   │
└─────────────┘
   │
   ▼
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

2️⃣ 系統處理 (自動)
   │
   ▼
┌──────────────────┐
│  STT 語音轉文字   │ ← Google Cloud Speech-to-Text
│  "你好，今天..."  │
└──────────────────┘
   │
   ▼
┌──────────────────┐
│  顯示用戶訊息    │
│  在對話框中      │
└──────────────────┘
   │
   ▼
┌──────────────────┐
│  LLM 生成回應    │ ← OpenAI GPT-4
│  "是啊！今天..." │
└──────────────────┘
   │
   ▼
┌──────────────────┐
│  顯示 AI 訊息    │
│  在對話框中      │
└──────────────────┘
   │
   ▼
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

3️⃣ 用戶操作 (可選)
   │
   ▼
┌──────────────────┐
│ 點擊喇叭圖示 🔊  │
└──────────────────┘
   │
   ▼
┌──────────────────┐
│  TTS 文字轉語音   │ ← Tacotron2 + WaveGlow
│  生成台語音檔    │
└──────────────────┘
   │
   ▼
┌──────────────────┐
│  播放語音        │
│  🔊 ♪♫♪         │
└──────────────────┘
```

## 🎯 使用場景示例

### 場景 1: 日常問候
```
用戶: "你好，今天天氣真好"
AI:   "是啊！今天確實是個好天氣，適合出去走走"
```

### 場景 2: 關心長輩
```
用戶: "阿公，你今天有吃藥嗎？"
AI:   "有啊，我早上就吃了。你放心，我都有按時吃藥"
```

### 場景 3: 聊天閒話家常
```
用戶: "昨天看的電視劇很好看"
AI:   "是哦？什麼電視劇？跟我講講看"
```

## 🎨 視覺元素說明

### 對話氣泡顏色
- **紫色漸層** 🟣: 用戶訊息
- **粉色漸層** 🩷: AI 訊息
- **灰色** ⚪: 系統訊息

### 按鈕狀態
- **紅色麥克風** 🔴: 待機狀態 (點擊開始錄音)
- **綠色麥克風** 🟢: 錄音中 (點擊停止錄音)
- **喇叭圖示** 🔊: 點擊播放語音

### 系統狀態指示
- **綠色點** 🟢: 系統正常
- **黃色點** 🟡: 部分服務未就緒
- **紅色點** 🔴: 無法連接服務

## 💡 使用小技巧

1. **錄音技巧**
   - 靠近麥克風說話
   - 語速適中，吐字清晰
   - 避免背景噪音

2. **對話技巧**
   - 一次說一個完整的句子
   - 可以混用台語和華語
   - 自然對話即可

3. **語音播放**
   - 每個 AI 回應都可以播放
   - 支持重複播放
   - 音量可在系統設置調整

## 📊 技術規格

| 項目 | 規格 |
|------|------|
| 音頻採樣率 | 16kHz |
| 音頻格式 | 16-bit PCM WAV |
| 最大錄音長度 | 30 秒 |
| 對話歷史保留 | 最近 20 輪 |
| 支援瀏覽器 | Chrome, Edge, Firefox |

---

**開始使用**: 執行 `./start_voice_chat.sh` 並打開 `voice_chat_interface.html`
